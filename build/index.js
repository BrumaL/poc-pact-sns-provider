(()=>{"use strict";var e={607:function(e,t,n){e=n.nmd(e);var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},o=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,s){function a(e){try{u(r.next(e))}catch(e){s(e)}}function i(e){try{u(r.throw(e))}catch(e){s(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,i)}u((r=r.apply(e,t||[])).next())}))},s=this&&this.__generator||function(e,t){var n,r,o,s,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return s={next:i(0),throw:i(1),return:i(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function i(s){return function(i){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&s[0]?r.return:s[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,s[1])).done)return o;switch(r=0,o&&(s=[2&s[0],o.value]),s[0]){case 0:case 1:o=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,r=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==s[0]&&2!==s[0])){a=0;continue}if(3===s[0]&&(!o||s[1]>o[0]&&s[1]<o[3])){a.label=s[1];break}if(6===s[0]&&a.label<o[1]){a.label=o[1],o=s;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(s);break}o[2]&&a.ops.pop(),a.trys.pop();continue}s=t.call(e,a)}catch(e){s=[6,e],r=0}finally{n=o=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,i])}}},a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};t.__esModule=!0,t.sendMessage=void 0;var i=a(n(127)),u=a(n(480)),l=i.default();l.use(i.default.json());var c=process.env.PORT,f=void 0===c?3e3:c,d=new u.default.SharedIniFileCredentials({profile:"default"}),p=new u.default.SNS({credentials:d,region:"eu-north-1"});l.get("/status",(function(e,t){return t.json({status:"ok",sns:p})})),t.sendMessage=function(e){return o(void 0,void 0,void 0,(function(){var t,n;return s(this,(function(o){return n=r(r({},e),{TopicArn:"arn:aws:sns:eu-north-1:286643423608:vs-prto-test-topic"}),p.publish(n,(function(e,n){e?(console.log(e),t=e):(console.log(n),t=n)})),[2,t]}))}))},l.post("/sendMessage",(function(e,n){var r={Message:e.body.message,MessageAttributes:{Country:{DataType:"String",StringValue:e.body.country},Region:{DataType:"String",StringValue:e.body.region}}},o=t.sendMessage(r);return console.log("response: ",o),n.send(o)})),n.c[n.s]===e&&l.listen(f,(function(){console.log("server started at http://localhost:"+f)})),t.default=l},480:e=>{e.exports=require("aws-sdk")},127:e=>{e.exports=require("express")}},t={};function n(r){var o=t[r];if(void 0!==o)return o.exports;var s=t[r]={id:r,loaded:!1,exports:{}};return e[r].call(s.exports,s,s.exports,n),s.loaded=!0,s.exports}n.c=t,n.nmd=e=>(e.paths=[],e.children||(e.children=[]),e),n(n.s=607)})();